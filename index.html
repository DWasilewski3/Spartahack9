<!DOCTYPE html>
<html>
<head>
    <title>Leaflet Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        #mapid { height: 800px; }
        #hourInfo { width: 125px; height: 20px; border: 1px solid black; padding: 10px; }

        .dropdown {
        position: relative;
        display: inline-block;
        }

        .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        padding: 12px 16px;
        z-index: 1;
        }

        .dropdown:hover .dropdown-content {
        display: block;
        }
    </style>
</head>
<body>
    <div id="mapid"></div>
    <select class = "dropdown" id="hourDropdown" onchange="hourChanged()">
        <option value="">Select an hour</option>
    </select>
    <script>

    var hourData = [];

        var polylinePoints2 = [
            [42.72567298498723, -84.475345480528],
            [42.726092956499976, -84.47534033012619],
            [42.726015971073835, -84.47620093161393],
            [42.726015971074595, -84.47789542132251],
            [42.72328723654343, -84.47795525853992],
            [42.72330551569573, -84.48065040021756],
            [42.7232605215469, -84.48178006002442],
            [42.72323856424078, -84.48450261252553],
            [42.72237864575939, -84.48726111385501],
            [42.7219543422842, -84.48898623494586],
            [42.72204863219176, -84.49042823988418],
            [42.72422557999264, -84.49120586558313],
            [42.725057514392596, -84.49129268786925],
            [42.72570641546615, -84.49129268786925],
            [42.72570641547169, -84.48780847174919],
            [42.72778628226487, -84.48793254498736],
            [42.72870815405431, -84.48834222337788],
            [42.72908527948057, -84.48831629436545],
            [42.73078422010073, -84.48709244500213],
            [42.730814693948815, -84.48663090859044],
            [42.72953477951647, -84.4841728382692],
            [42.72851387644486, -84.4827259994083],
            [42.72742057727235, -84.48264821237524],
            [42.72641868689918, -84.48239410805981],
            [42.72586249743591, -84.48230594941913],
            [42.72546636063299, -84.48233901980817],
            [42.72524925258086, -84.48144739018919],
            [42.72523085355186, -84.47535124834738],
            [42.72567298498723, -84.475345480528]
        ];
        var polylinePoints3 = [
            [42.72567298498723, -84.475345480528],
            [42.726092956499976, -84.47534033012619],
            [42.72606666529016, -84.4779240388682],
            [42.73046528233908, -84.47768579211784],
            [42.73085029232722, -84.47646279213274],
            [42.731281967350704, -84.47589099993189],
            [42.73284530580569, -84.4749697791639],
            [42.734676928423404, -84.48154538953258],
            [42.7356335505304, -84.48542087022923],
            [42.73367362595138, -84.49334654570401],
            [42.733591961083384, -84.49631668852498],
            [42.733323632902845, -84.49639610410844],
            [42.733323632902845, -84.49441071452223],
            [42.73309030310652, -84.49377538985463],
            [42.7324369750067, -84.4939818703716],
            [42.72914224130027, -84.49397473849199],
            [42.72913277537294, -84.49396283190966],
            [42.72903854846157, -84.49572661151436],
            [42.72881475897333, -84.4966405700368],
            [42.728202278350494, -84.49848452144175],
            [42.72810528502016, -84.49895167250153],
            [42.72743839927778, -84.4987499304734],
            [42.727466186326865, -84.49859862395232],
            [42.72809602276726, -84.4988381926107],
            [42.728744377128834, -84.49682077232957],
            [42.72901297909328, -84.49601380421711],
            [42.72914264859085, -84.49397116618248],
            [42.72568961586169, -84.4939039771525],
            [42.72570423096386, -84.48780569426096],
            [42.72570423096481, -84.48333131416847],
            [42.725436834118945, -84.48227346133567],
            [42.72524298909882, -84.48135684955182],
            [42.725230097154046, -84.47536771151698],
            [42.72568675172252, -84.475349825049]
        ];
        var polylinePoints5 = [
    [42.72567298498723, -84.475345480528],
    [42.726092956499976, -84.47534033012619],
    [42.72606666529016, -84.4779240388682],
    [42.73046528233908, -84.47768579211784],
    [42.73085029232722, -84.47646279213274],
    [42.731281967350704, -84.47589099993189],
    [42.73284530580569, -84.4749697791639],
    [42.734676928423404, -84.48154538953258],
    [42.7356335505304, -84.48542087022923],
    [42.73367362595138, -84.49334654570401],
    [42.733591961083384, -84.49631668852498],
    [42.733323632902845, -84.49639610410844],
    [42.733323632902845, -84.49441071452223],
    [42.73309030310652, -84.49377538985463],
    [42.7324369750067, -84.4939818703716],
    [42.72914224130027, -84.49397473849199],
    [42.72913277537294, -84.49396283190966],
    [42.72903854846157, -84.49572661151436],
    [42.72881475897333, -84.4966405700368],
    [42.728202278350494, -84.49848452144175],
    [42.72810528502016, -84.49895167250153],
    [42.72743839927778, -84.4987499304734],
    [42.727466186326865, -84.49859862395232],
    [42.72809602276726, -84.4988381926107],
    [42.728744377128834, -84.49682077232957],
    [42.72901297909328, -84.49601380421711],
    [42.72914264859085, -84.49397116618248],
    [42.72568961586169, -84.4939039771525],
    [42.72570423096386, -84.48780569426096],
    [42.72570423096481, -84.48333131416847],
    [42.725436834118945, -84.48227346133567],
    [42.72524298909882, -84.48135684955182],
    [42.725230097154046, -84.47536771151698],
    [42.72568675172252, -84.475349825049]
];
        var polylinePoints6 = [
    [42.72567298498723, -84.475345480528],
    [42.726092956499976, -84.47534033012619],
    [42.726015971073835, -84.47620093161393],
    [42.726015971074595, -84.47789542132251],
    [42.72927264124386, -84.47782909310132],
    [42.72926632254151, -84.47635816320009],
    [42.72914626707471, -84.47538614519516],
    [42.72944956464812, -84.47484422365258],
    [42.730239395119, -84.47462917542141],
    [42.73189484718387, -84.47496465067346],
    [42.73247614049168, -84.47634956127231],
    [42.73267200982819, -84.47893014004643],
    [42.732678328187106, -84.47902476126097],
    [42.732874196885064, -84.47972151753001],
    [42.732533005850186, -84.48033225450654],
    [42.73286787855854, -84.4810118069082],
    [42.73342388961324, -84.48183759211592],
    [42.733569209876535, -84.48260316380416],
    [42.733531300275025, -84.48600952777372],
    [42.733063746667725, -84.48716218629284],
    [42.732526687498726, -84.48652564352854],
    [42.7323624096476, -84.48652564352854],
    [42.73188852878457, -84.48498589819593],
    [42.73177479682821, -84.48294724097285],
    [42.73115558590656, -84.48219027120815],
    [42.7308838893728, -84.4813042724957],
    [42.73114926739605, -84.48058171043894],
    [42.731132651163264, -84.48056815276757],
    [42.730795852253294, -84.48009920405346],
    [42.730575785685886, -84.4796119677499],
    [42.730374539476465, -84.47942082365846],
    [42.72931177327731, -84.4793680872414],
    [42.729259355244636, -84.4785617048432],
    [42.72928305050533, -84.4778291697758],
    [42.72524048964914, -84.4779133038825],
    [42.72523363363265, -84.47537284317616],
    [42.72567298498723, -84.475345480528]
];
        var polylinePoints1 = [
    [42.72568675172252, -84.475349825049],
    [42.726092956499976, -84.47534033012619],
    [42.726043014569804, -84.47567230269364],
    [42.72600282351312, -84.47653126542639],
    [42.72602508125808, -84.47790564686582],
    [42.72604026262703, -84.48137753325244],
    [42.72586249743591, -84.48230594941913],
    [42.72641868689918, -84.48239410805981],
    [42.72742057727235, -84.48264821237524],
    [42.72851387644486, -84.4827259994083],
    [42.72953477951647, -84.4841728382692],
    [42.730814693948815, -84.48663090859044],
    [42.73078422010073, -84.48709244500213],
    [42.73015140228167, -84.48752313021295],
    [42.72954047284027, -84.48794367188461],
    [42.72907943111359, -84.48832454555135],
    [42.72956017539375, -84.48940815797866],
    [42.72989117748603, -84.48969247212352],
    [42.72939467367416, -84.49157001842208],
    [42.729142479743906, -84.49345829354775],
    [42.72914425437836, -84.49392344974356],
    [42.73057352936345, -84.49397072884234],
    [42.73056286774921, -84.49421747416532],
    [42.730141732521, -84.49423924581147],
    [42.72996129918029, -84.49451161199829],
    [42.729934681890164, -84.4974185195722],
    [42.730095906991835, -84.49766695985734],
    [42.73309079620076, -84.4977330829098],
    [42.73309231940036, -84.49452094512002],
    [42.73290207442425, -84.49425848726337],
    [42.7320464620394, -84.49426206982427],
    [42.73197796155264, -84.4941967900187],
    [42.73196426144619, -84.4939683106992],
    [42.72568720886266, -84.49391884207725],
    [42.7257129908738, -84.49336696992805],
    [42.725698019447314, -84.48782358439509],
    [42.7257179813427, -84.48736163545573],
    [42.72569699359108, -84.48323868130814],
    [42.725436834118945, -84.48227346133567],
    [42.72524298909882, -84.48135684955182],
    [42.725230097154046, -84.47536771151698],
    [42.72568675172252, -84.475349825049]
];
        var polylinePoints4 = [
        [42.72567298498723, -84.475345480528],
        [42.726092956499976, -84.47534033012619],
        [42.726015971073835, -84.47620093161393],
        [42.726015971074595, -84.47789542132251],
        [42.721404966878666, -84.47804196524791],
        [42.71902748672895, -84.47821367649776],
        [42.71836759853893, -84.4872879555679],
        [42.71830035120589, -84.49386620135053],
        [42.716250879361915, -84.49390911668587],
        [42.716342684916015, -84.49581695291528],
        [42.71638580070141, -84.49656027369548],
        [42.716184593446705, -84.49722535018304],
        [42.71731996869505, -84.49890760247507],
        [42.71772237518934, -84.50029643866965],
        [42.71772237518799, -84.5013136144653],
        [42.71754991558141, -84.50170483592858],
        [42.716630122917955, -84.50205693524552],
        [42.71546599078153, -84.50111800373368],
        [42.71448867780475, -84.50103975944103],
        [42.71411499524619, -84.50080502656307],
        [42.71356883976699, -84.4992988239295],
        [42.71343948644953, -84.49693193407676],
        [42.713468231657394, -84.4939390899154],
        [42.71182973372562, -84.49395865098856],
        [42.71185220606495, -84.46204168030428],
        [42.71906634230723, -84.46213387501314],
        [42.71906634230723, -84.46480752176375],
        [42.719354212970806, -84.46805738548647],
        [42.71930341237118, -84.4715377359644],
        [42.719066302643306, -84.47823178111538],
        [42.72141733200545, -84.47805021545653],
        [42.72525215315545, -84.4779140412202],
        [42.72523363363265, -84.47537284317616],
        [42.72567298498723, -84.475345480528]
    ];

        // Initialize the map and set its view to our chosen geographical coordinates and a zoom level
var map = L.map('mapid').setView([42.72332, -84.48304], 15);

// Add OpenStreetMap tile layer to the map
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// Fetch hoursData from a JSON file in the same directory
var hourData = [];
fetch('data.json')
.then(response => response.json())
.then(data => {
    hourData = data;

    function draw_map(routes_list = []){
        console.log("DRAW MAP: ",routes_list);

        map.eachLayer(function (layer) {
            map.removeLayer(layer);
        });

        // Add the tile layer back to the map
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        for (i = 0; i < routes_list.length; i++){
            if(routes_list[i] === 1) {var polyline1 = L.polyline(polylinePoints1, {color: 'grey'}).addTo(map);}
            else if(routes_list[i] === 2) {var polyline2 = L.polyline(polylinePoints2, {color: 'purple'}).addTo(map);}
            else if(routes_list[i] === 3) {var polyline3 = L.polyline(polylinePoints3, {color: 'blue'}).addTo(map);}
            else if(routes_list[i] === 4) {var polyline4 = L.polyline(polylinePoints4, {color: 'orange'}).addTo(map);}
            else if(routes_list[i] === 5) {var polyline5 = L.polyline(polylinePoints5, {color: 'red'}).addTo(map);}
            else if(routes_list[i] === 6) {var polyline6 = L.polyline(polylinePoints6, {color: 'green'}).addTo(map);}
        }
    }

    // Function to handle change in dropdown selection
    function hourChanged() {
        var selectedHour = document.getElementById("hourDropdown").value;
        console.log("Selected hour: " + selectedHour);
        draw_map(hourData[Number(selectedHour)]);
    }

    for (var i = 0; i < 24; i++) {
        var option = document.createElement("option");
        option.text = (i < 12) ? i + ":00 am" : i + ":00 pm";
        option.value = i;
        document.getElementById("hourDropdown").appendChild(option);
    }
});
    </script>
</body>
</html>
